# üìö Documentaci√≥n Detallada de Colecciones MongoDB - Sistema de M√∫sica

## üéØ Prop√≥sito del Documento

Este archivo proporciona una documentaci√≥n completa y detallada de todas las colecciones de MongoDB utilizadas en el sistema de m√∫sica, incluyendo comentarios espec√≠ficos sobre cada campo, su prop√≥sito, tipo de dato y ejemplos de uso pr√°ctico.

---

## üé§ Colecci√≥n: `artistas`

### üìã Descripci√≥n General
La colecci√≥n `artistas` almacena informaci√≥n completa sobre artistas musicales, incluyendo datos personales, profesionales y de redes sociales. Esta colecci√≥n es fundamental para el sistema ya que establece la base para todas las relaciones musicales.

### üèóÔ∏è Estructura de Campos

#### **Campo: `_id`**
- **Tipo**: String (ObjectId personalizado)
- **Formato**: `artista_XXX` (donde XXX es un n√∫mero secuencial)
- **Ejemplo**: `"artista_001"`
- **Prop√≥sito**: Identificador √∫nico del artista en el sistema
- **Comentario**: Se utiliza un formato personalizado en lugar de ObjectId est√°ndar para facilitar la legibilidad y debugging durante el desarrollo

#### **Campo: `nombre`**
- **Tipo**: String
- **Longitud**: Variable (t√≠picamente 1-50 caracteres)
- **Ejemplo**: `"The Beatles"`, `"Maroon 5"`, `"Ed Sheeran"`
- **Prop√≥sito**: Nombre art√≠stico o real del artista
- **Comentario**: Puede incluir n√∫meros, caracteres especiales y art√≠culos como "The". Es el campo principal para b√∫squedas y filtros

#### **Campo: `pais`**
- **Tipo**: String
- **Longitud**: Variable (t√≠picamente 5-30 caracteres)
- **Ejemplo**: `"Reino Unido"`, `"Estados Unidos"`, `"Colombia"`
- **Prop√≥sito**: Pa√≠s de origen o residencia principal del artista
- **Comentario**: Permite segmentaci√≥n geogr√°fica para recomendaciones locales y an√°lisis de mercado por regi√≥n

#### **Campo: `genero`**
- **Tipo**: String
- **Longitud**: Variable (t√≠picamente 5-25 caracteres)
- **Ejemplo**: `"Rock"`, `"Pop Rock"`, `"Pop Latino"`
- **Prop√≥sito**: G√©nero musical principal del artista
- **Comentario**: Aunque un artista puede interpretar m√∫ltiples g√©neros, se almacena el g√©nero m√°s representativo para simplificar las consultas

#### **Campo: `redes_sociales`**
- **Tipo**: Object (subdocumento)
- **Estructura**: Contiene campos para diferentes plataformas sociales
- **Prop√≥sito**: Enlaces a perfiles oficiales del artista en redes sociales
- **Comentario**: Estructura anidada que permite agregar nuevas plataformas sin modificar el esquema principal

##### **Subcampo: `instagram`**
- **Tipo**: String
- **Formato**: `@username`
- **Ejemplo**: `"@thebeatles"`
- **Prop√≥sito**: Usuario de Instagram del artista
- **Comentario**: Se incluye el s√≠mbolo @ para facilitar la navegaci√≥n directa

##### **Subcampo: `twitter`**
- **Tipo**: String
- **Formato**: `@username`
- **Ejemplo**: `"@thebeatles"`
- **Prop√≥sito**: Usuario de Twitter/X del artista
- **Comentario**: Permite integraci√≥n con feeds de redes sociales para contenido din√°mico

##### **Subcampo: `facebook`**
- **Tipo**: String
- **Formato**: `username` o `PageName`
- **Ejemplo**: `"TheBeatles"`
- **Prop√≥sito**: P√°gina o perfil de Facebook del artista
- **Comentario**: No incluye @ ya que Facebook usa nombres de p√°gina

#### **Campo: `activo`**
- **Tipo**: Boolean
- **Valores**: `true` o `false`
- **Ejemplo**: `true`
- **Prop√≥sito**: Indica si el artista est√° activamente produciendo m√∫sica
- **Comentario**: √ötil para filtrar artistas activos vs. retirados en recomendaciones y b√∫squedas

#### **Campo: `fecha_debut`**
- **Tipo**: String (YYYY)
- **Formato**: A√±o de 4 d√≠gitos
- **Ejemplo**: `"1960"`
- **Prop√≥sito**: A√±o en que el artista comenz√≥ su carrera musical
- **Comentario**: Se almacena como string para mantener consistencia, aunque se podr√≠a convertir a Date para c√°lculos temporales

### üîç Casos de Uso Principales
- **B√∫squeda por nombre**: Filtrado de artistas por patrones espec√≠ficos
- **Segmentaci√≥n geogr√°fica**: Recomendaciones por regi√≥n
- **Filtrado por g√©nero**: Categorizaci√≥n musical
- **An√°lisis de actividad**: Estad√≠sticas de artistas activos vs. retirados
- **Integraci√≥n social**: Enlaces directos a perfiles oficiales

---

## üíø Colecci√≥n: `albumes`

### üìã Descripci√≥n General
La colecci√≥n `albumes` contiene informaci√≥n detallada sobre √°lbumes musicales, incluyendo metadatos como a√±o de lanzamiento, sello discogr√°fico y estad√≠sticas de tracks. Esta colecci√≥n act√∫a como intermediario entre artistas y canciones.

### üèóÔ∏è Estructura de Campos

#### **Campo: `_id`**
- **Tipo**: String (ObjectId personalizado)
- **Formato**: `album_XXX` (donde XXX es un n√∫mero secuencial)
- **Ejemplo**: `"album_001"`
- **Prop√≥sito**: Identificador √∫nico del √°lbum en el sistema
- **Comentario**: Formato consistente con otras colecciones para facilitar el mantenimiento

#### **Campo: `titulo`**
- **Tipo**: String
- **Longitud**: Variable (t√≠picamente 1-100 caracteres)
- **Ejemplo**: `"Abbey Road"`, `"√∑ (Divide)"`, `"After Hours"`
- **Prop√≥sito**: T√≠tulo oficial del √°lbum
- **Comentario**: Puede incluir caracteres especiales, s√≠mbolos y emojis. Es el campo principal para b√∫squedas

#### **Campo: `a√±o`**
- **Tipo**: String (YYYY)
- **Formato**: A√±o de 4 d√≠gitos
- **Ejemplo**: `"1969"`, `"2020"`
- **Prop√≥sito**: A√±o de lanzamiento del √°lbum
- **Comentario**: Permite filtrado temporal y an√°lisis de tendencias por d√©cada

#### **Campo: `artista_id`**
- **Tipo**: String
- **Formato**: Referencia a `artistas._id`
- **Ejemplo**: `"artista_001"`
- **Prop√≥sito**: Referencia al artista que cre√≥ el √°lbum
- **Comentario**: Clave for√°nea que mantiene la integridad referencial con la colecci√≥n artistas

#### **Campo: `artista`**
- **Tipo**: String
- **Ejemplo**: `"The Beatles"`
- **Prop√≥sito**: Nombre del artista (denormalizado)
- **Comentario**: Campo denormalizado para evitar joins en consultas frecuentes, mejora el rendimiento

#### **Campo: `genero`**
- **Tipo**: String
- **Ejemplo**: `"Rock"`, `"Pop Rock"`
- **Prop√≥sito**: G√©nero musical del √°lbum
- **Comentario**: Puede diferir del g√©nero del artista si el √°lbum es experimental o crossover

#### **Campo: `sello`**
- **Tipo**: String
- **Ejemplo**: `"Apple Records"`, `"Octone Records"`
- **Prop√≥sito**: Compa√±√≠a discogr√°fica que public√≥ el √°lbum
- **Comentario**: √ötil para an√°lisis de mercado y derechos de autor

#### **Campo: `tracks`**
- **Tipo**: Number
- **Rango**: T√≠picamente 1-50
- **Ejemplo**: `17`, `12`
- **Prop√≥sito**: N√∫mero total de canciones en el √°lbum
- **Comentario**: Entero positivo que permite c√°lculos de duraci√≥n promedio por track

#### **Campo: `duracion_total`**
- **Tipo**: String (MM:SS)
- **Formato**: Minutos:Segundos
- **Ejemplo**: `"47:23"`, `"52:50"`
- **Prop√≥sito**: Duraci√≥n total del √°lbum
- **Comentario**: Formato legible que facilita la presentaci√≥n al usuario

### üîç Casos de Uso Principales
- **B√∫squeda por t√≠tulo**: Filtrado de √°lbumes por nombre
- **Filtrado temporal**: √Ålbumes por a√±o o d√©cada
- **An√°lisis por sello**: Estad√≠sticas de compa√±√≠as discogr√°ficas
- **C√°lculo de duraci√≥n**: Promedios y totales de duraci√≥n
- **Relaci√≥n artista-√°lbum**: Navegaci√≥n jer√°rquica

---

## üéµ Colecci√≥n: `canciones`

### üìã Descripci√≥n General
La colecci√≥n `canciones` es el n√∫cleo del sistema, almacenando informaci√≥n detallada sobre cada canci√≥n individual, incluyendo letras, duraci√≥n y metadatos de relaci√≥n. Esta colecci√≥n es la m√°s consultada y requiere optimizaci√≥n de rendimiento.

### üèóÔ∏è Estructura de Campos

#### **Campo: `_id`**
- **Tipo**: String (ObjectId personalizado)
- **Formato**: `cancion_XXX` (donde XXX es un n√∫mero secuencial)
- **Ejemplo**: `"cancion_001"`
- **Prop√≥sito**: Identificador √∫nico de la canci√≥n en el sistema
- **Comentario**: Formato consistente para facilitar debugging y mantenimiento

#### **Campo: `titulo`**
- **Tipo**: String
- **Longitud**: Variable (t√≠picamente 1-100 caracteres)
- **Ejemplo**: `"Hey Jude"`, `"Shape of You"`, `"Blinding Lights"`
- **Prop√≥sito**: T√≠tulo oficial de la canci√≥n
- **Comentario**: Campo principal para b√∫squedas de texto y filtros

#### **Campo: `duracion`**
- **Tipo**: String (MM:SS)
- **Formato**: Minutos:Segundos
- **Ejemplo**: `"7:11"`, `"3:53"`, `"2:48"`
- **Prop√≥sito**: Duraci√≥n exacta de la canci√≥n
- **Comentario**: Formato legible que permite c√°lculos de duraci√≥n total y filtros por rango

#### **Campo: `artista_id`**
- **Tipo**: String
- **Formato**: Referencia a `artistas._id`
- **Ejemplo**: `"artista_001"`
- **Prop√≥sito**: Referencia al artista que interpreta la canci√≥n
- **Comentario**: Clave for√°nea para mantener integridad referencial

#### **Campo: `artista`**
- **Tipo**: String
- **Ejemplo**: `"The Beatles"`, `"Ed Sheeran"`
- **Prop√≥sito**: Nombre del artista (denormalizado)
- **Comentario**: Campo denormalizado para evitar joins en consultas frecuentes

#### **Campo: `album_id`**
- **Tipo**: String
- **Formato**: Referencia a `albumes._id`
- **Ejemplo**: `"album_001"`
- **Prop√≥sito**: Referencia al √°lbum que contiene la canci√≥n
- **Comentario**: Clave for√°nea para navegaci√≥n jer√°rquica

#### **Campo: `album`**
- **Tipo**: String
- **Ejemplo**: `"Abbey Road"`, `"√∑ (Divide)"`
- **Prop√≥sito**: T√≠tulo del √°lbum (denormalizado)
- **Comentario**: Campo denormalizado para consultas eficientes

#### **Campo: `genero`**
- **Tipo**: String
- **Ejemplo**: `"Rock"`, `"Pop"`, `"R&B"`
- **Prop√≥sito**: G√©nero musical de la canci√≥n
- **Comentario**: Puede diferir del g√©nero del √°lbum o artista para canciones espec√≠ficas

#### **Campo: `letra`**
- **Tipo**: String
- **Longitud**: Variable (t√≠picamente 50-2000 caracteres)
- **Ejemplo**: `"Hey Jude, don't be afraid. Take a sad song and make it better..."`
- **Prop√≥sito**: Letra completa o fragmento representativo de la canci√≥n
- **Comentario**: Campo de texto largo que permite b√∫squedas sem√°nticas y an√°lisis de contenido

### üîç Casos de Uso Principales
- **B√∫squeda por t√≠tulo**: Filtrado de canciones por nombre
- **B√∫squeda en letras**: Contenido sem√°ntico y tem√°tico
- **Filtrado por duraci√≥n**: Rangos de tiempo espec√≠ficos
- **Navegaci√≥n jer√°rquica**: Artista ‚Üí √Ålbum ‚Üí Canci√≥n
- **An√°lisis de contenido**: Patrones en letras y t√≠tulos

---

## üë§ Colecci√≥n: `usuarios`

### üìã Descripci√≥n General
La colecci√≥n `usuarios` almacena informaci√≥n de los usuarios registrados en la plataforma, incluyendo preferencias musicales, datos de suscripci√≥n y ubicaci√≥n geogr√°fica. Esta colecci√≥n es fundamental para personalizaci√≥n y an√°lisis de comportamiento.

### üèóÔ∏è Estructura de Campos

#### **Campo: `_id`**
- **Tipo**: String (ObjectId personalizado)
- **Formato**: `usuario_XXX` (donde XXX es un n√∫mero secuencial)
- **Ejemplo**: `"usuario_001"`
- **Prop√≥sito**: Identificador √∫nico del usuario en el sistema
- **Comentario**: Formato consistente para facilitar el mantenimiento y debugging

#### **Campo: `nombre`**
- **Tipo**: String
- **Longitud**: Variable (t√≠picamente 2-50 caracteres)
- **Ejemplo**: `"Maria"`, `"John"`, `"Ana"`
- **Prop√≥sito**: Nombre real o de usuario del cliente
- **Comentario**: Campo principal para identificaci√≥n personal y comunicaci√≥n

#### **Campo: `correo`**
- **Tipo**: String
- **Formato**: Direcci√≥n de correo electr√≥nico v√°lida
- **Ejemplo**: `"maria@gmail.com"`, `"john123@hotmail.com"`
- **Prop√≥sito**: Direcci√≥n de correo para autenticaci√≥n y comunicaci√≥n
- **Comentario**: Debe ser √∫nico en el sistema y validado por formato

#### **Campo: `ciudad`**
- **Tipo**: String
- **Longitud**: Variable (t√≠picamente 2-50 caracteres)
- **Ejemplo**: `"Madrid"`, `"New York"`, `"Barcelona"`
- **Prop√≥sito**: Ciudad de residencia del usuario
- **Comentario**: Permite segmentaci√≥n geogr√°fica para eventos locales y recomendaciones

#### **Campo: `pais`**
- **Tipo**: String
- **Longitud**: Variable (t√≠picamente 5-30 caracteres)
- **Ejemplo**: `"Espa√±a"`, `"Estados Unidos"`, `"M√©xico"`
- **Prop√≥sito**: Pa√≠s de residencia del usuario
- **Comentario**: √ötil para an√°lisis de mercado por regi√≥n y cumplimiento legal

#### **Campo: `suscripcion`**
- **Tipo**: String
- **Valores**: `"Free"`, `"Premium"`
- **Ejemplo**: `"Premium"`
- **Prop√≥sito**: Tipo de suscripci√≥n del usuario
- **Comentario**: Determina funcionalidades disponibles y nivel de servicio

#### **Campo: `fecha_registro`**
- **Tipo**: String (YYYY-MM-DD)
- **Formato**: Fecha ISO
- **Ejemplo**: `"2020-03-15"`
- **Prop√≥sito**: Fecha en que el usuario se registr√≥ en la plataforma
- **Comentario**: Permite an√°lisis de retenci√≥n y crecimiento de usuarios

#### **Campo: `generos_favoritos`**
- **Tipo**: Array de Strings
- **Ejemplo**: `["Pop", "Rock", "R&B"]`
- **Prop√≥sito**: Lista de g√©neros musicales preferidos del usuario
- **Comentario**: Array que permite m√∫ltiples preferencias para recomendaciones personalizadas

### üîç Casos de Uso Principales
- **Autenticaci√≥n**: Validaci√≥n de credenciales
- **Personalizaci√≥n**: Recomendaciones basadas en preferencias
- **Segmentaci√≥n**: An√°lisis demogr√°fico y geogr√°fico
- **An√°lisis de suscripci√≥n**: M√©tricas de conversi√≥n y retenci√≥n
- **Marketing**: Campa√±as dirigidas por ubicaci√≥n y preferencias

---

## üìÇ Colecci√≥n: `playlists`

### üìã Descripci√≥n General
La colecci√≥n `playlists` almacena listas de reproducci√≥n creadas por usuarios, incluyendo metadatos como descripci√≥n, g√©nero principal y duraci√≥n total. Esta colecci√≥n es fundamental para la experiencia de usuario y el descubrimiento de m√∫sica.

### üèóÔ∏è Estructura de Campos

#### **Campo: `_id`**
- **Tipo**: String (ObjectId personalizado)
- **Formato**: `playlist_XXX` (donde XXX es un n√∫mero secuencial)
- **Ejemplo**: `"playlist_001"`
- **Prop√≥sito**: Identificador √∫nico de la playlist en el sistema
- **Comentario**: Formato consistente para facilitar el mantenimiento

#### **Campo: `nombre`**
- **Tipo**: String
- **Longitud**: Variable (t√≠picamente 1-100 caracteres)
- **Ejemplo**: `"üéµ Party Vibes üéâ"`, `"Rock Classics"`, `"üíï Love Songs üíï"`
- **Prop√≥sito**: Nombre descriptivo de la playlist
- **Comentario**: Puede incluir emojis y caracteres especiales para personalizaci√≥n

#### **Campo: `descripcion`**
- **Tipo**: String
- **Longitud**: Variable (t√≠picamente 10-200 caracteres)
- **Ejemplo**: `"Perfect for dancing and having fun with friends"`
- **Prop√≥sito**: Descripci√≥n detallada del prop√≥sito o contenido de la playlist
- **Comentario**: Permite b√∫squedas sem√°nticas y comprensi√≥n del contexto

#### **Campo: `usuario_creador_id`**
- **Tipo**: String
- **Formato**: Referencia a `usuarios._id`
- **Ejemplo**: `"usuario_001"`
- **Prop√≥sito**: Referencia al usuario que cre√≥ la playlist
- **Comentario**: Clave for√°nea para mantener integridad referencial

#### **Campo: `usuario_creador`**
- **Tipo**: String
- **Ejemplo**: `"Maria"`, `"John"`
- **Prop√≥sito**: Nombre del usuario creador (denormalizado)
- **Comentario**: Campo denormalizado para evitar joins en consultas frecuentes

#### **Campo: `canciones_incluidas`**
- **Tipo**: Array de Strings
- **Formato**: Referencias a `canciones._id`
- **Ejemplo**: `["cancion_003", "cancion_004", "cancion_009"]`
- **Prop√≥sito**: Lista de IDs de canciones incluidas en la playlist
- **Comentario**: Array que permite orden personalizado y gesti√≥n de contenido

#### **Campo: `genero_principal`**
- **Tipo**: String
- **Ejemplo**: `"Pop"`, `"Rock"`, `"R&B"`
- **Prop√≥sito**: G√©nero musical predominante en la playlist
- **Comentario**: √ötil para categorizaci√≥n y recomendaciones autom√°ticas

#### **Campo: `duracion_total`**
- **Tipo**: String (MM:SS)
- **Formato**: Minutos:Segundos
- **Ejemplo**: `"11:39"`, `"22:02"`
- **Prop√≥sito**: Duraci√≥n total de la playlist
- **Comentario**: Calculado din√°micamente basado en las canciones incluidas

#### **Campo: `fecha_creacion`**
- **Tipo**: String (YYYY-MM-DD)
- **Formato**: Fecha ISO
- **Ejemplo**: `"2023-01-15"`
- **Prop√≥sito**: Fecha en que se cre√≥ la playlist
- **Comentario**: Permite an√°lisis temporal y ordenamiento cronol√≥gico

### üîç Casos de Uso Principales
- **Descubrimiento**: Playlists recomendadas por g√©nero o tema
- **Personalizaci√≥n**: Creaci√≥n y gesti√≥n de listas personales
- **Compartir**: Socializaci√≥n de gustos musicales
- **An√°lisis**: Estad√≠sticas de uso y popularidad
- **Recomendaciones**: Sugerencias basadas en contenido similar

---

## üîó Relaciones entre Colecciones

### üìä Diagrama de Relaciones
```
usuarios (1) ‚Üê‚Üí (N) playlists
  ‚Üì
artistas (1) ‚Üê‚Üí (N) albumes
  ‚Üì
albumes (1) ‚Üê‚Üí (N) canciones
  ‚Üì
playlists (N) ‚Üê‚Üí (N) canciones
```

### üîç Tipos de Relaciones

#### **Relaci√≥n 1:N (Uno a Muchos)**
- **Usuario ‚Üí Playlists**: Un usuario puede crear m√∫ltiples playlists
- **Artista ‚Üí √Ålbumes**: Un artista puede tener m√∫ltiples √°lbumes
- **√Ålbum ‚Üí Canciones**: Un √°lbum puede contener m√∫ltiples canciones

#### **Relaci√≥n N:N (Muchos a Muchos)**
- **Playlists ‚Üî Canciones**: Una playlist puede contener m√∫ltiples canciones, y una canci√≥n puede estar en m√∫ltiples playlists

#### **Relaci√≥n 1:1 (Uno a Uno)**
- **Artista ‚Üî Perfil**: Cada artista tiene un perfil √∫nico
- **Usuario ‚Üî Cuenta**: Cada usuario tiene una cuenta √∫nica

### üí° Estrategias de Denormalizaci√≥n

#### **Campos Denormalizados**
- `artista` en `albumes` y `canciones`
- `album` en `canciones`
- `usuario_creador` en `playlists`

#### **Prop√≥sito de Denormalizaci√≥n**
- **Rendimiento**: Evita joins en consultas frecuentes
- **Legibilidad**: Facilita la comprensi√≥n de los datos
- **Mantenimiento**: Simplifica las consultas de lectura

#### **Consideraciones**
- **Consistencia**: Los campos denormalizados deben mantenerse sincronizados
- **Espacio**: Aumenta ligeramente el uso de almacenamiento
- **Actualizaci√≥n**: Requiere l√≥gica para mantener consistencia

---

## üéØ Casos de Uso Avanzados

### üîç B√∫squedas Complejas

#### **B√∫squeda Multi-Colecci√≥n**
```javascript
// Encontrar todas las canciones de artistas activos en playlists de usuarios premium
db.canciones.aggregate([
  {
    $lookup: {
      from: "artistas",
      localField: "artista_id",
      foreignField: "_id",
      as: "artista_info"
    }
  },
  {
    $lookup: {
      from: "playlists",
      localField: "_id",
      foreignField: "canciones_incluidas",
      as: "playlist_info"
    }
  },
  {
    $match: {
      "artista_info.activo": true,
      "playlist_info.usuario_creador_id": {
        $in: db.usuarios.find({ "suscripcion": "Premium" }).map(u => u._id)
      }
    }
  }
])
```

#### **An√°lisis de Tendencias**
```javascript
// Analizar g√©neros m√°s populares por d√©cada
db.albumes.aggregate([
  {
    $group: {
      _id: {
        decada: { $substr: ["$a√±o", 0, 3] + "0" },
        genero: "$genero"
      },
      count: { $sum: 1 }
    }
  },
  {
    $sort: { "_id.decada": 1, "count": -1 }
  }
])
```

### üìä Agregaciones Complejas

#### **Estad√≠sticas de Usuario**
```javascript
// Calcular estad√≠sticas completas de un usuario
db.usuarios.aggregate([
  {
    $match: { "_id": "usuario_001" }
  },
  {
    $lookup: {
      from: "playlists",
      localField: "_id",
      foreignField: "usuario_creador_id",
      as: "playlists_creadas"
    }
  },
  {
    $lookup: {
      from: "canciones",
      localField: "generos_favoritos",
      foreignField: "genero",
      as: "canciones_recomendadas"
    }
  },
  {
    $project: {
      nombre: 1,
      total_playlists: { $size: "$playlists_creadas" },
      total_canciones_recomendadas: { $size: "$canciones_recomendadas" },
      generos_favoritos: 1
    }
  }
])
```

---

## üöÄ Optimizaciones Recomendadas

### üìà √çndices Sugeridos

#### **Colecci√≥n: `artistas`**
```javascript
// √çndice en nombre para b√∫squedas de texto
db.artistas.createIndex({ "nombre": 1 })

// √çndice compuesto en pa√≠s y g√©nero
db.artistas.createIndex({ "pais": 1, "genero": 1 })

// √çndice en fecha_debut para an√°lisis temporal
db.artistas.createIndex({ "fecha_debut": 1 })
```

#### **Colecci√≥n: `canciones`**
```javascript
// √çndice de texto en t√≠tulo y letra
db.canciones.createIndex({ "titulo": "text", "letra": "text" })

// √çndice en artista_id para joins eficientes
db.canciones.createIndex({ "artista_id": 1 })

// √çndice en g√©nero para filtros r√°pidos
db.canciones.createIndex({ "genero": 1 })
```

#### **Colecci√≥n: `usuarios`**
```javascript
// √çndice √∫nico en correo
db.usuarios.createIndex({ "correo": 1 }, { unique: true })

// √çndice en suscripci√≥n para segmentaci√≥n
db.usuarios.createIndex({ "suscripcion": 1 })

// √çndice compuesto en ciudad y pa√≠s
db.usuarios.createIndex({ "ciudad": 1, "pais": 1 })
```

### üîß Configuraciones de Rendimiento

#### **Configuraci√≥n de WiredTiger**
```javascript
// Configuraci√≥n recomendada para colecciones grandes
db.adminCommand({
  setParameter: 1,
  wiredTigerConcurrentReadTransactions: 128,
  wiredTigerConcurrentWriteTransactions: 128
})
```

#### **Configuraci√≥n de Memoria**
```javascript
// Asignar memoria espec√≠fica para √≠ndices
db.adminCommand({
  setParameter: 1,
  maxIndexBuildMemoryUsageMegabytes: 1024
})
```

---

## üìù Notas de Mantenimiento

### üîÑ Sincronizaci√≥n de Datos Denormalizados

#### **Trigger de Actualizaci√≥n**
```javascript
// Funci√≥n para mantener sincronizados los campos denormalizados
function actualizarCamposDenormalizados(coleccion, campo, valor, id) {
  if (coleccion === "artistas") {
    // Actualizar nombre en albumes y canciones
    db.albumes.updateMany(
      { "artista_id": id },
      { $set: { "artista": valor } }
    )
    db.canciones.updateMany(
      { "artista_id": id },
      { $set: { "artista": valor } }
    )
  }
}
```

#### **Validaci√≥n de Integridad**
```javascript
// Funci√≥n para validar integridad referencial
function validarIntegridadReferencial() {
  // Verificar que todas las referencias existen
  const referenciasInvalidas = db.canciones.find({
    "artista_id": { $nin: db.artistas.distinct("_id") }
  })
  
  if (referenciasInvalidas.count() > 0) {
    print("‚ö†Ô∏è  Referencias inv√°lidas encontradas en canciones")
    return false
  }
  return true
}
```

### üìä Monitoreo y M√©tricas

#### **Estad√≠sticas de Colecci√≥n**
```javascript
// Obtener estad√≠sticas detalladas de cada colecci√≥n
db.runCommand({
  collStats: "artistas",
  scale: 1024 * 1024 // Resultado en MB
})

db.runCommand({
  collStats: "canciones",
  scale: 1024 * 1024
})
```

#### **An√°lisis de Consultas**
```javascript
// Habilitar profiling para an√°lisis de rendimiento
db.setProfilingLevel(2, { slowms: 100 })

// Ver consultas lentas
db.system.profile.find({ millis: { $gt: 100 } }).sort({ millis: -1 })
```

---

## üéØ Conclusi√≥n

Este documento proporciona una gu√≠a completa para entender y trabajar con las colecciones de MongoDB en el sistema de m√∫sica. Cada campo ha sido dise√±ado con un prop√≥sito espec√≠fico, considerando tanto la funcionalidad como el rendimiento.

### üîë Puntos Clave
- **Estructura Relacional**: Las colecciones mantienen relaciones l√≥gicas bien definidas
- **Denormalizaci√≥n Estrat√©gica**: Campos duplicados para optimizar consultas frecuentes
- **Flexibilidad**: Esquema que permite crecimiento y evoluci√≥n del sistema
- **Rendimiento**: √çndices y configuraciones optimizadas para consultas r√°pidas
- **Mantenibilidad**: C√≥digo y documentaci√≥n que facilitan el desarrollo futuro

### üöÄ Pr√≥ximos Pasos
1. **Implementar √≠ndices** sugeridos para optimizar consultas
2. **Configurar monitoreo** para detectar problemas de rendimiento
3. **Desarrollar funciones** de mantenimiento para datos denormalizados
4. **Crear tests** para validar integridad referencial
5. **Documentar APIs** que utilicen estas colecciones

---

*Documento generado para el Taller de Expresiones Regulares con MongoDB - Sistema de M√∫sica* 